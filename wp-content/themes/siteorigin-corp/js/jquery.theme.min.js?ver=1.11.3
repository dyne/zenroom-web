jQuery(function(o){function e(){var o=jQuery(window).scrollTop(),e="no";jQuery(".panel-row-style").each(function(){var t="#"+jQuery(this).attr("id"),n=jQuery(this).offset().top-1,s=jQuery(this).outerHeight(),a=n-i,r=n+s-i;return o>=a&&o<=r?(e="yes",jQuery("#site-navigation .current").removeClass("current"),jQuery('#site-navigation a[href$="'+t+'"]').parent("li").addClass("current"),!1):void("no"===e&&jQuery("#site-navigation .current").removeClass("current"))})}o.fn.siteoriginCorpIsVisible=function(){var o=this[0].getBoundingClientRect();return o.bottom>=0&&o.right>=0&&o.top<=(window.innerHeight||document.documentElement.clientHeight)&&o.left<=(window.innerWidth||document.documentElement.clientWidth)};var t={x:0,y:0};o(document).mousemove(function(o){t={x:o.pageX,y:o.pageY}}),"undefined"!=typeof o.fn.fitVids&&o(".entry-content, .entry-content .panel, .entry-video, .woocommerce #main").fitVids({ignore:".tableauViz"}),o(document).ready(function(){o(".flexslider").each(function(){o(this).flexslider({animation:"slide",customDirectionNav:o(this).find(".flex-direction-nav a"),start:function(){o(".flexslider .slides img").show()}})})}),o("body.no-js").removeClass("no-js"),o("body").hasClass("css3-animations")&&(o(".menu-item").children("a").focus(function(){o(this).parents("ul, li").addClass("focus")}),o(".menu-item").children("a").click(function(){o(this).parents("ul, li").removeClass("focus")}),o(".menu-item").children("a").focusout(function(){o(this).parents("ul, li").removeClass("focus")})),jQuery(document).ready(function(o){window.location.hash||(o('#site-navigation a[href="'+window.location.href+'"]').parent("li").addClass("current-menu-item"),o(window).scroll(function(){o("#site-navigation ul li").hasClass("current")&&o("#site-navigation li").removeClass("current-menu-item")}))});var i,n=o("#wpadminbar").outerHeight(),s=o("body").hasClass("admin-bar"),a=o("header").hasClass("sticky");i=a&&s&&jQuery(window).width()>600?n+o("header").outerHeight()-1:a?o("header").outerHeight()-1:0,o.fn.siteoriginCorpSmoothScroll=function(){o("body").hasClass("disable-smooth-scroll")||o(this).click(function(o){var e=this.hash,t=e.substring(1),n=this;if(jQuery(".panel-grid [id*="+t+"]").length>0?(jQuery("#site-navigation .current").removeClass("current"),jQuery(n).parent("li").addClass("current")):jQuery("#site-navigation .current").removeClass("current"),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var s=jQuery(this.hash);if(s=s.length?s:jQuery("[name="+this.hash.slice(1)+"]"),s.length)return jQuery("html, body").animate({scrollTop:s.offset().top-i},1200),!1}})},jQuery(window).load(function(){o('#site-navigation a[href*="#"]:not([href="#"]), .comments-link a[href*="#"]:not([href="#"]), .corp-scroll[href*="#"]:not([href="#"])').siteoriginCorpSmoothScroll()}),jQuery(window).load(function(){if(location.pathname.replace(/^\//,"")==window.location.pathname.replace(/^\//,"")&&location.hostname==window.location.hostname){var o=jQuery(window.location.hash);if(o.length)return jQuery("html, body").animate({scrollTop:o.offset().top-i},0),!1}}),jQuery(window).on("scroll",e);var r=!1;o("#mobile-menu-button").click(function(e){e.preventDefault();var t=o(this);if(t.toggleClass("to-close"),r===!1){r=o("<div></div>").append(o(".main-navigation ul").first().clone()).attr("id","mobile-navigation").appendTo("#masthead").hide(),r.find("#primary-menu").show().css("opacity",1),r.find(".menu-item-has-children > a").addClass("has-dropdown"),r.find(".page_item_has_children > a").addClass("has-dropdown"),r.find(".has-dropdown").after('<button class="dropdown-toggle" aria-expanded="false"><i class="icon-angle-down" aria-hidden="true"></i></button>'),r.find(".dropdown-toggle").click(function(e){e.preventDefault(),o(this).toggleClass("toggle-open").next(".children, .sub-menu").slideToggle("fast")}),r.find(".has-dropdown").click(function(e){"undefined"!=typeof o(this).attr("href")&&"#"!=o(this).attr("href")||(e.preventDefault(),o(this).siblings(".dropdown-toggle").trigger("click"))});var i=function(){if(o("#masthead").hasClass("sticky")){var e="fixed"===o("#wpadminbar").css("position")?o("#wpadminbar").outerHeight():0,t=o("#masthead").innerHeight(),i=o(window).height()-t-e;o("#mobile-navigation").css("max-height",i)}};i(),o(window).resize(i),o("#mobile-navigation").scroll(i)}r.slideToggle("fast"),o("#mobile-navigation a").click(function(e){(!o(this).hasClass("has-dropdown")||"undefined"!=typeof o(this).attr("href")&&"#"!==o(this).attr("href"))&&r.is(" :visible")&&r.slideUp("fast"),t.removeClass("to-close")}),o('#mobile-navigation a[href*="#"]:not([href="#"])').siteoriginCorpSmoothScroll()}),o("#search-button").click(function(e){e.preventDefault();var t=o(this);t.toggleClass("close-search"),o("input[type='search']").each(function(){o(this).attr("size",o(this).attr("placeholder").length)});var i=function(){var e=o(window).width(),t=o(window).height();o("#fullscreen-search").css({height:t+"px",width:e+"px"})};i(),o(window).resize(i),t.hasClass("close-search")?(o("body").css("margin-right",window.innerWidth-o("body").width()+"px"),o("body").css("overflow","hidden")):(o("body").css("overflow",""),o("body").css("margin-right","")),o("#fullscreen-search").slideToggle("fast"),o("#fullscreen-search input").focus()}),o("#fullscreen-search-form").submit(function(){o(this).find("button svg").hide(),o(this).find("button svg:last-child").show()}),o("#fullscreen-search #search-close-button").click(function(e){e.preventDefault(),o("#search-button.close-search").trigger("click")}),o(document).keyup(function(e){27===e.keyCode&&o("#search-button.close-search").trigger("click")});var l=function(){var e=window.pageYOffset||document.documentElement.scrollTop;e>o("#masthead").outerHeight()?o("#scroll-to-top").hasClass("show")||o("#scroll-to-top").css("pointer-events","auto").addClass("show"):o("#scroll-to-top").hasClass("show")&&o("#scroll-to-top").css("pointer-events","none").removeClass("show")};l(),o(window).scroll(l),o("#scroll-to-top").click(function(){o("html, body").animate({scrollTop:0})}),("ontouchstart"in document.documentElement||window.navigator.msMaxTouchPoints||window.navigator.MaxTouchPoints)&&(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(o("body").css("cursor","pointer"),o("body").addClass("ios")),o(".main-navigation #primary-menu").find(".menu-item-has-children > a").each(function(){o(this).on("click touchend",function(e){var t=o(this);e.stopPropagation(),"click"!=e.type&&(t.parent().hasClass("hover")||(o(".menu-item.hover").removeClass("hover"),t.parents(".menu-item").addClass("hover"),e.preventDefault()),o(document).one("click",function(){t.parent().removeClass("hover")}))})})),o("#portfolio-loop").length&&($infinite_scroll=0,o(document.body).on("post-load",function(){var e=o("#portfolio-loop");$infinite_scroll+=1;var e=o("#projects-container"),t=o("#infinite-view-"+$infinite_scroll),i=t.find(".jetpack-portfolio.post");i.hide(),e.append(i).isotope("appended",i)}))}),function(o){o(window).load(function(){siteoriginCorp.logoScale=parseFloat(siteoriginCorp.logoScale),o(".blog-layout-masonry").length&&o(".blog-layout-masonry").masonry({itemSelector:".hentry",columnWidth:".hentry"});var e=o("#projects-container");o(".portfolio-filter-terms").length&&e.isotope({itemSelector:".post",filter:"*",layoutMode:"fitRows",resizable:!0}),o(".portfolio-filter-terms button").click(function(){var t=o(this).attr("data-filter");return e.isotope({filter:t}),o(".portfolio-filter-terms button").removeClass("active"),o(this).addClass("active"),!1});var t=o("#masthead"),i={top:parseInt(t.css("padding-top")),bottom:parseInt(t.css("padding-bottom"))};if(t.data("scale-logo")){var n=t.find(".site-branding img"),s=n.width(),a=n.height(),r=s*siteoriginCorp.logoScale,l=a*siteoriginCorp.logoScale;o(".site-branding img").wrap("<div class='custom-logo-wrapper'></div>");var c=function(){var e=t.find(".site-branding > *"),s=window.pageYOffset||document.documentElement.scrollTop;if(s>0?t.css({"padding-top":i.top*siteoriginCorp.logoScale,"padding-bottom":i.bottom*siteoriginCorp.logoScale}).addClass("stuck"):t.css({"padding-top":i.top,"padding-bottom":i.bottom}).removeClass("stuck"),n.length)if(s>0){var a=siteoriginCorp.logoScale+Math.max(0,48-s)/48*(1-siteoriginCorp.logoScale);n.height()==l&&n.width()==r&&a==siteoriginCorp.logoScale||o(".site-branding img").css({width:100*a+"%"})}else o(".site-branding img").css({width:""});else s>0?e.css("transform","scale("+siteoriginCorp.logoScale+")"):e.css("transform","scale(1)")};c(),o(window).scroll(c).resize(c)}if(o("#masthead").hasClass("sticky")){var t=o("#masthead"),d=o('<div class="masthead-sentinel"></div>').insertAfter(t),h=o("#topbar"),u=o('#topbar .woocommerce-store-notice[style*="display: none"]'),p=function(){o(window).scrollTop()>0?o(t).addClass("stuck"):o(t).removeClass("stuck")};p(),o(window).scroll(p);var f=function(){o("body").hasClass("mobile-header-ns")&&o(window).width()<siteoriginCorp.collapse||(d!==!1&&d.css("height",t.outerHeight()),o("body").hasClass("no-topbar")||h.siteoriginCorpIsVisible()||o("body").addClass("topbar-out"),h.length&&o("body").hasClass("topbar-out")&&h.siteoriginCorpIsVisible()&&o("body").removeClass("topbar-out"),o("body").hasClass("no-topbar")&&!o(window).scrollTop()&&o("body").addClass("topbar-out"),o("body").hasClass("no-topbar")||!o("body").hasClass("no-topbar")&&o("body").hasClass("topbar-out")||u.length?t.css("position","fixed"):o("body").hasClass("no-topbar")||o("body").hasClass("topbar-out")||t.css("position","absolute"))};f(),o(window).resize(f).scroll(f)}})}(jQuery);